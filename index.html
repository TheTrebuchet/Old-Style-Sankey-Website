<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Getting Started</title>
    <script type="text/javascript" src="node_modules/paper/dist/paper-full.js"></script>
    <!--script type="module" src="configarea.js"></script-->
    <script type="module" src="graphic.js"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function(event) { 
         document.getElementById("download-to-svg").onclick = function(){
          var fileName = "custom.svg"
          var url = "data:image/svg+xml;utf8," + encodeURIComponent(paper.project.exportSVG({asString:true}));
          var link = document.createElement("a");
          link.download = fileName;
          link.href = url;
          link.click();
         }
        });
     </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style type="text/css">
        .container {
            width: auto;
            max-width: 1000px;
            padding: 0 15px;
        }

        .container .text-muted {
            margin: 20px 0;
        }

        canvas[resize] {
            width: 100%;
            height: 800px;
        }

        .form-range::-moz-range-track {
            background: #e6e6e6;
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <div class="container">

    </div>
    <div class="container text-center">
        <header class="page-header">
            <h1 class="display-3">
                Simple Sankey Generator
            </h1>
            <h1 class="display-6"> a.k.a. Old-Style-Sankey</h1>
        </header>
        <div class="lead">
            <p> I strongly recommend writing the config in notepad or
                elsewhere and pasting it here only after that, so that you don't lose it. Anywho, this website is
                just
                something that can help you in great need, the real Old-Style-Sankey is on Github, it is a python
                script you can download and run locally.
            </p>
        </div>

    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <div class="row">
                    <div class="col-md-5">
                        <label class="form-label" for="horsc">Horizontal Scale</label>
                        <div class="range">
                            <input type="range" class="form-range" id="schor" min="0" max="100" />
                        </div>
                        <label class="form-label" for="scver">Vertical Scale</label>
                        <div class="range">
                            <input type="range" class="form-range" id="scver" min="0" max="100" />
                        </div>
                        <label class="form-label" for="marg">Margin</label>
                        <div class="range">
                            <input type="range" class="form-range" id="marg" min="0" max="100" />
                        </div>
                        <label class="form-label" for="tsize">Text Size</label>
                        <div class="range">
                            <input type="range" class="form-range" id="tsize" min="0" max="100" />
                        </div>

                    </div>
                    <div class="col-md-5">
                        <label for="unit" class="form-label">Unit</label>
                        <input type="text" class="form-control" id="unit" placeholder="nope">
                        <br>
                        <label for="grid" class="form-label">Grid</label>
                        <input type="text" class="form-control" id="grid" placeholder="nope">
                    </div>
                    
                </div>
                <br>
                <!--div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Presets
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">sankey2</a></li>
                        <li><a class="dropdown-item" href="#">sankey11</a></li>
                        <li><a class="dropdown-item" href="#">bicarbonate</a></li>
                    </ul>
                </div-->
                <br>
                <label for="config" class="form-label">Config</label>
                <textarea class="form-control" id="config" rows="20"></textarea>
                <br>
                <button id="download-to-svg" class="btn btn-success">Download</button>
            </div>
            <div class="col-md">
                <canvas id="myCanvas" resize></canvas>
            </div>
        </div>
    </div>
    <br>
    <div class="container">
        <h2 id="command-options">Command options</h2>
        <p><code>--h</code> shows help<br /><br />
            <code>--unit</code> accepts a unit, like g/h<br /><br />
            <code>--skew</code> is a percentage of the whole graphic width at which the inputs and outputs are
            shifted to the side, 0 disables this effect, default is 0.2.<br /><br />
            <code>--tang</code> is a multiplier for the cut-outs in input and output blocks, it specified
            global angle at which they are created, default is 0.4.<br /><br />
            <code>--grid</code> is an on/off flag that creates the grid<br /><br />
            <code>--unitvalue</code> accepts a value by which the grid will form, default is 100<br /><br />
        <h2 id="generating-config">Generating config</h2>
        <p>Generating the config files is very straight-forward.</p>
        <h3 id="initiate-a-row">Initiate a row</h3>
        <p>Place a <code>#</code> and specify height with <code>L</code> being large and
            <code>s</code> being small.
        </p>
        <h3 id="initiate-blocks">Initiate blocks</h3>
        <p>Specify input/operation/output with +/=/- and type in text that will be displayed in the block. <em>General
                convention is that blocks should come in a sequence of outputs, operations and inputs, but that's just
                you
                choice</em></p>
        <p>If you want to make loops, just make +@ for loop input and -@ for loop output. Currently only one loop is
            supported.
        </p>
        <div class="card w-50">
            <div class="card-body">
                <pre><code>#s
=1038.34 wet bicarbonate
-88.84 loss of CO$_2$</code></pre>
            </div>
        </div>

        <p>New blocks within the row exist are placed simply below. Any kind of python formatting is acceptable.<br />
            Notably <code>\n</code> is for newline and <code>$_a$</code> is for subscripts
            and <code>$^a$</code> is for superscripts</p>
        <p>End your file with a new line with <code>#</code>!</p>
        <h3 id="multi-level-blocks">Multi-level blocks</h3>
        <p>You can create many additional rows within a row.</p>
        <ol type="1">
            <li>First initiate a row like usual</li>
            <li>Place some new blocks</li>
            <li>In the place where multiple rows would exist, just create an indentation and initiate new rows</li>
        </ol>
        <p>!!! be sure to make additional height in the top-level row. Say your top level row consists of one large and
            one
            small row, you initiate it by <code>#Ls</code> !!!</p>
        <div class="card w-50">
            <div class="card-body">
                <pre><code>#s
=1038.34
-88.84 loss of CO$_2$
#Ls
-916.78 filtrate
  #L
  =121.56 wet bicarbonate
  #s
  =121.56 drying</div></div></code></pre>
                <p>change text position to your liking, be aware that while resizing the window still lets you drag it,
                    if you
                    zoom
                    in
                    or out you will lose that ability</p>
            </div>
</body>

</html>